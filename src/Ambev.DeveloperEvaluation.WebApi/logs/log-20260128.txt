2026-01-28 02:12:52.054 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:12:52.230 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:12:52.540 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:12:52.540 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:12:52.540 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:12:52.540 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:12:52.541 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:12:53.229 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:12:53.296 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 67.0049ms
2026-01-28 02:12:53.332 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:12:53.336 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 3.5415ms
2026-01-28 02:12:53.367 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:12:53.460 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 92.9805ms
2026-01-28 02:13:06.924 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 POST https://localhost:7181/api/Sales - application/json 249
2026-01-28 02:13:06.946 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:13:06.962 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "CreateSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateSale(Ambev.DeveloperEvaluation.WebApi.Features.Sales.CreateSale.CreateSaleRequest, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:13:07.074 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:13:07.244 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.CreateSale.CreateSaleHandler Starting Sale handle creation
2026-01-28 02:13:08.026 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Creating new sale
2026-01-28 02:13:08.332 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (66ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?' (DbType = Guid), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal), @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = Decimal), @p18='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sales" ("Id", "BranchId", "CancelledAt", "CreatedAt", "CustomerId", "IsCancelled", "SaleNumber", "TotalAmount", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO "SaleProduct" ("Id", "CreatedAt", "DiscountAmount", "DiscountPercentage", "ProductId", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2026-01-28 02:13:08.367 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Sale created successfully "100731d6-4b55-467a-b958-b40a76397399"
2026-01-28 02:13:08.377 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi) in 1412.333ms
2026-01-28 02:13:08.378 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:13:08.421 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 POST https://localhost:7181/api/Sales - 500 null text/plain; charset=utf-8 1496.6945ms
2026-01-28 02:14:48.913 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:14:52.341 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:14:52.409 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:14:52.646 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:14:52.646 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:14:52.647 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:14:52.647 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:14:52.647 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:14:53.514 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:14:53.581 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 67.606ms
2026-01-28 02:14:53.598 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:14:53.600 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 1.7134ms
2026-01-28 02:14:53.634 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:14:53.731 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.2833ms
2026-01-28 02:15:02.695 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 POST https://localhost:7181/api/Sales - application/json 249
2026-01-28 02:15:02.727 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:15:02.744 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "CreateSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateSale(Ambev.DeveloperEvaluation.WebApi.Features.Sales.CreateSale.CreateSaleRequest, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:15:02.864 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:15:03.046 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.CreateSale.CreateSaleHandler Starting Sale handle creation
2026-01-28 02:15:03.928 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Creating new sale
2026-01-28 02:15:04.240 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (71ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?' (DbType = Guid), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal), @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = Decimal), @p18='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sales" ("Id", "BranchId", "CancelledAt", "CreatedAt", "CustomerId", "IsCancelled", "SaleNumber", "TotalAmount", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO "SaleProduct" ("Id", "CreatedAt", "DiscountAmount", "DiscountPercentage", "ProductId", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2026-01-28 02:15:04.269 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Sale created successfully "76bba4a3-1e60-42ae-bfc7-a559d09efb9f"
2026-01-28 02:15:04.269 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.CreateSale.CreateSaleHandler Finishing Sale handle creation "76bba4a3-1e60-42ae-bfc7-a559d09efb9f"
2026-01-28 02:15:04.275 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.CreatedResult in 1407.4156ms.
2026-01-28 02:15:04.280 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:15:04.305 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi) in 1557.2861ms
2026-01-28 02:15:04.305 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:15:04.316 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 POST https://localhost:7181/api/Sales - 201 null application/json; charset=utf-8 1620.9058ms
2026-01-28 02:15:26.334 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:19:54.491 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:19:54.563 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:19:54.827 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:19:54.827 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:19:54.828 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:19:54.828 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:19:54.828 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:19:55.630 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:19:55.698 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 68.3957ms
2026-01-28 02:19:55.718 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:19:55.723 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 4.7285ms
2026-01-28 02:19:55.755 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:19:55.850 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 94.4916ms
2026-01-28 02:20:02.964 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 POST https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c/include-items - application/json 156
2026-01-28 02:20:02.985 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:20:02.999 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "IncludeSaleItem", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] IncludeSaleItem(System.Guid, Ambev.DeveloperEvaluation.WebApi.Features.Sales.IncludeSaleItem.IncludeSaleProductRequest, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:20:03.099 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:20:03.224 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.IncludeSaleItem.IncludeSaleProductHandler Including item "08ad5c46-6ea9-43fb-9954-e4f597568a53" to Sale "ae86743e-9451-45b2-8c0f-133a9f5c2c9c"
2026-01-28 02:20:04.270 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (64ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:20:04.363 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Cancelling sale "ae86743e-9451-45b2-8c0f-133a9f5c2c9c"
2026-01-28 02:20:04.486 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = Guid), @p7='?' (DbType = Decimal), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (DbType = Guid), @p14='?' (DbType = Boolean), @p15='?' (DbType = Int32), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SaleProduct" ("Id", "CreatedAt", "DiscountAmount", "DiscountPercentage", "ProductId", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE "Sales" SET "BranchId" = @p10, "CancelledAt" = @p11, "CreatedAt" = @p12, "CustomerId" = @p13, "IsCancelled" = @p14, "SaleNumber" = @p15, "TotalAmount" = @p16, "UpdatedAt" = @p17
WHERE "Id" = @p18;
2026-01-28 02:20:04.502 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Sale cancelled successfully "ae86743e-9451-45b2-8c0f-133a9f5c2c9c"
2026-01-28 02:20:04.502 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.IncludeSaleItem.IncludeSaleProductHandler Item "08ad5c46-6ea9-43fb-9954-e4f597568a53" included to sale "ae86743e-9451-45b2-8c0f-133a9f5c2c9c" wit success!
2026-01-28 02:20:04.509 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.CreatedResult in 1406.5024ms.
2026-01-28 02:20:04.515 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:20:04.546 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi) in 1543.9715ms
2026-01-28 02:20:04.547 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:20:04.560 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 POST https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c/include-items - 201 null application/json; charset=utf-8 1595.5375ms
2026-01-28 02:20:23.462 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 POST https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c/include-items - application/json 160
2026-01-28 02:20:23.465 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:20:23.465 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "IncludeSaleItem", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] IncludeSaleItem(System.Guid, Ambev.DeveloperEvaluation.WebApi.Features.Sales.IncludeSaleItem.IncludeSaleProductRequest, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:20:23.466 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:20:23.468 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.IncludeSaleItem.IncludeSaleProductHandler Including item "08ad5c46-6ea9-43fb-9954-e4f597568a53" to Sale "ae86743e-9451-45b2-8c0f-133a9f5c2c9c"
2026-01-28 02:20:23.489 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:20:23.490 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Cancelling sale "ae86743e-9451-45b2-8c0f-133a9f5c2c9c"
2026-01-28 02:20:23.496 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = Guid), @p7='?' (DbType = Decimal), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (DbType = Guid), @p14='?' (DbType = Boolean), @p15='?' (DbType = Int32), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SaleProduct" ("Id", "CreatedAt", "DiscountAmount", "DiscountPercentage", "ProductId", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE "Sales" SET "BranchId" = @p10, "CancelledAt" = @p11, "CreatedAt" = @p12, "CustomerId" = @p13, "IsCancelled" = @p14, "SaleNumber" = @p15, "TotalAmount" = @p16, "UpdatedAt" = @p17
WHERE "Id" = @p18;
2026-01-28 02:20:23.499 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Sale cancelled successfully "ae86743e-9451-45b2-8c0f-133a9f5c2c9c"
2026-01-28 02:20:23.499 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.IncludeSaleItem.IncludeSaleProductHandler Item "08ad5c46-6ea9-43fb-9954-e4f597568a53" included to sale "ae86743e-9451-45b2-8c0f-133a9f5c2c9c" wit success!
2026-01-28 02:20:23.499 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.CreatedResult in 32.62ms.
2026-01-28 02:20:23.499 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:20:23.500 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi) in 34.5641ms
2026-01-28 02:20:23.500 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:20:23.500 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 POST https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c/include-items - 201 null application/json; charset=utf-8 37.8827ms
2026-01-28 02:21:01.807 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:21:18.665 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:21:18.741 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:21:18.973 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:21:18.973 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:21:18.973 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:21:18.974 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:21:18.974 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:21:19.338 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:21:19.399 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 61.286ms
2026-01-28 02:21:19.420 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:21:19.424 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 3.7727ms
2026-01-28 02:21:19.455 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:21:19.552 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.2608ms
2026-01-28 02:21:30.571 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 POST https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c/include-items - application/json 160
2026-01-28 02:21:30.605 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:21:30.624 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "IncludeSaleItem", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] IncludeSaleItem(System.Guid, Ambev.DeveloperEvaluation.WebApi.Features.Sales.IncludeSaleItem.IncludeSaleProductRequest, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:21:30.749 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:21:30.890 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.IncludeSaleItem.IncludeSaleProductHandler Including item "08ad5c46-6ea9-43fb-9954-e4f597568a53" to Sale "ae86743e-9451-45b2-8c0f-133a9f5c2c9c"
2026-01-28 02:21:32.066 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (76ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:21:32.221 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Cancelling sale "ae86743e-9451-45b2-8c0f-133a9f5c2c9c"
2026-01-28 02:21:32.346 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Decimal), @p3='?' (DbType = Decimal), @p4='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = Guid), @p7='?' (DbType = Decimal), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (DbType = Guid), @p14='?' (DbType = Boolean), @p15='?' (DbType = Int32), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SaleProduct" ("Id", "CreatedAt", "DiscountAmount", "DiscountPercentage", "ProductId", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
UPDATE "Sales" SET "BranchId" = @p10, "CancelledAt" = @p11, "CreatedAt" = @p12, "CustomerId" = @p13, "IsCancelled" = @p14, "SaleNumber" = @p15, "TotalAmount" = @p16, "UpdatedAt" = @p17
WHERE "Id" = @p18;
2026-01-28 02:21:32.363 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Sale cancelled successfully "ae86743e-9451-45b2-8c0f-133a9f5c2c9c"
2026-01-28 02:21:32.363 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.IncludeSaleItem.IncludeSaleProductHandler Item "08ad5c46-6ea9-43fb-9954-e4f597568a53" included to sale "ae86743e-9451-45b2-8c0f-133a9f5c2c9c" wit success!
2026-01-28 02:21:32.370 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.CreatedResult in 1617.2161ms.
2026-01-28 02:21:32.375 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:21:32.408 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi) in 1781.4351ms
2026-01-28 02:21:32.409 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.IncludeSaleItem (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:21:32.419 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 POST https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c/include-items - 201 null application/json; charset=utf-8 1847.8216ms
2026-01-28 02:23:44.952 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - null null
2026-01-28 02:23:44.956 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:23:44.959 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSale(System.Guid, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:23:44.961 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:23:45.015 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:23:45.018 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.0026ms.
2026-01-28 02:23:45.018 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Common.ApiResponseWithData`1[[<>f__AnonymousType0`1[[Ambev.DeveloperEvaluation.Application.Sales.Base.BaseSaleResult, Ambev.DeveloperEvaluation.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:23:45.026 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) in 66.2163ms
2026-01-28 02:23:45.026 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:23:45.026 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - 200 null application/json; charset=utf-8 74.7727ms
2026-01-28 02:24:01.539 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:24:55.925 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:24:56.078 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:24:56.348 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:24:56.348 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:24:56.348 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:24:56.348 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:24:56.348 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:24:56.801 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:24:56.862 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 61.3776ms
2026-01-28 02:24:56.881 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:24:56.884 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 3.1412ms
2026-01-28 02:24:56.917 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:24:57.009 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 92.2849ms
2026-01-28 02:26:11.283 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:26:37.157 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:26:37.228 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:26:37.504 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:26:37.504 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:26:37.504 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:26:37.504 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:26:37.504 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:26:38.064 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:26:38.126 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 62.6559ms
2026-01-28 02:26:38.166 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:26:38.168 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 1.6801ms
2026-01-28 02:26:38.199 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:26:38.293 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 94.1399ms
2026-01-28 02:26:45.794 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 POST https://localhost:7181/api/Sales - application/json 249
2026-01-28 02:26:45.827 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:26:45.842 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "CreateSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateSale(Ambev.DeveloperEvaluation.WebApi.Features.Sales.CreateSale.CreateSaleRequest, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:26:45.967 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:26:46.153 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.CreateSale.CreateSaleHandler Starting Sale handle creation
2026-01-28 02:26:46.960 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Creating new sale
2026-01-28 02:26:47.277 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Guid), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?' (DbType = Guid), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal), @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = Decimal), @p18='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sales" ("Id", "BranchId", "CancelledAt", "CreatedAt", "CustomerId", "IsCancelled", "SaleNumber", "TotalAmount", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO "SaleProduct" ("Id", "CreatedAt", "DiscountAmount", "DiscountPercentage", "ProductId", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2026-01-28 02:26:47.311 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Sale created successfully "afa08b81-aa1b-444d-8ad7-daec7ebc97a2"
2026-01-28 02:26:47.311 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.CreateSale.CreateSaleHandler Finishing Sale handle creation "afa08b81-aa1b-444d-8ad7-daec7ebc97a2"
2026-01-28 02:26:47.317 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.CreatedResult in 1347.2192ms.
2026-01-28 02:26:47.323 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing CreatedResult, writing value of type '<>f__AnonymousType0`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:26:47.350 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi) in 1505.7503ms
2026-01-28 02:26:47.351 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:26:47.360 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 POST https://localhost:7181/api/Sales - 201 null application/json; charset=utf-8 1566.2724ms
2026-01-28 02:27:51.731 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:27:54.656 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:27:54.725 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:27:54.999 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:27:55.000 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:27:55.000 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:27:55.000 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:27:55.000 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:27:55.369 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:27:55.440 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 71.0231ms
2026-01-28 02:27:55.457 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:27:55.467 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 10.8807ms
2026-01-28 02:27:55.496 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:27:55.589 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 93.2539ms
2026-01-28 02:27:59.082 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - null null
2026-01-28 02:27:59.113 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:27:59.131 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSale(System.Guid, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:27:59.227 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:28:00.599 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (69ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:28:00.745 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1515.1176ms.
2026-01-28 02:28:00.750 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Common.ApiResponseWithData`1[[<>f__AnonymousType0`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:28:00.800 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) in 1666.2617ms
2026-01-28 02:28:00.800 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:28:00.810 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - 200 null application/json; charset=utf-8 1727.9417ms
2026-01-28 02:28:15.717 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:29:03.924 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:29:03.996 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:29:04.238 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:29:04.238 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:29:04.238 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:29:04.239 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:29:04.239 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:29:04.931 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:29:04.996 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 65.1886ms
2026-01-28 02:29:05.015 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:29:05.018 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 2.8799ms
2026-01-28 02:29:05.049 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:29:05.137 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.0377ms
2026-01-28 02:29:11.180 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - null null
2026-01-28 02:29:11.204 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:29:11.221 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSale(System.Guid, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:29:11.320 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:29:12.604 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (66ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:29:12.699 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1375.7565ms.
2026-01-28 02:29:12.705 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Common.ApiResponseWithData`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:29:12.754 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) in 1529.2319ms
2026-01-28 02:29:12.755 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:29:12.825 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - 200 null application/json; charset=utf-8 1644.4241ms
2026-01-28 02:29:21.022 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:31:26.165 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:31:26.243 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:31:26.503 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:31:26.503 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:31:26.503 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:31:26.503 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:31:26.503 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:31:27.325 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:31:27.394 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 70.5868ms
2026-01-28 02:31:27.415 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:31:27.417 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 2.457ms
2026-01-28 02:31:27.453 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:31:27.546 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 92.7713ms
2026-01-28 02:32:17.841 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 POST https://localhost:7181/api/Sales/76bba4a3-1e60-42ae-bfc7-a559d09efb9f - null 0
2026-01-28 02:32:17.874 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint '405 HTTP Method Not Supported'
2026-01-28 02:32:17.874 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint '405 HTTP Method Not Supported'
2026-01-28 02:32:17.881 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 POST https://localhost:7181/api/Sales/76bba4a3-1e60-42ae-bfc7-a559d09efb9f - 405 0 null 39.8444ms
2026-01-28 02:32:30.780 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 POST https://localhost:7181/api/Sales/76bba4a3-1e60-42ae-bfc7-a559d09efb9f/cancel - null 0
2026-01-28 02:32:30.786 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CancelSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:32:30.812 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "CancelSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CancelSale(System.Guid, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:32:30.920 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CancelSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:32:31.040 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.CancelSale.CancelSaleHandler Starting cancelling sale: "76bba4a3-1e60-42ae-bfc7-a559d09efb9f"
2026-01-28 02:32:32.094 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (58ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:32:32.184 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Cancelling sale "76bba4a3-1e60-42ae-bfc7-a559d09efb9f"
2026-01-28 02:32:32.266 -03:00 [INF] Ambev.DeveloperEvaluation.Application.Sales.CancelSale.CancelSaleHandler Sale cancelled with success: "76bba4a3-1e60-42ae-bfc7-a559d09efb9f"
2026-01-28 02:32:32.270 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (13ms) [Parameters=[@p8='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Decimal), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Sales" SET "BranchId" = @p0, "CancelledAt" = @p1, "CreatedAt" = @p2, "CustomerId" = @p3, "IsCancelled" = @p4, "SaleNumber" = @p5, "TotalAmount" = @p6, "UpdatedAt" = @p7
WHERE "Id" = @p8;
2026-01-28 02:32:32.273 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CancelSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1349.7138ms.
2026-01-28 02:32:32.277 -03:00 [INF] Ambev.DeveloperEvaluation.ORM.Repositories.SaleRepository Sale cancelled successfully "76bba4a3-1e60-42ae-bfc7-a559d09efb9f"
2026-01-28 02:32:32.279 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Common.ApiResponseWithData`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:32:32.326 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CancelSale (Ambev.DeveloperEvaluation.WebApi) in 1511.2621ms
2026-01-28 02:32:32.327 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CancelSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:32:32.339 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 POST https://localhost:7181/api/Sales/76bba4a3-1e60-42ae-bfc7-a559d09efb9f/cancel - 200 null application/json; charset=utf-8 1558.3177ms
2026-01-28 02:33:27.484 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:33:30.628 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:33:30.697 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:33:30.939 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:33:30.940 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:33:30.940 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:33:30.940 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:33:30.940 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:33:31.163 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:33:31.225 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 62.274ms
2026-01-28 02:33:31.245 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:33:31.247 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 1.5093ms
2026-01-28 02:33:31.276 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:33:31.371 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 95.2709ms
2026-01-28 02:34:06.459 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:7181/api/Sales/76bba4a3-1e60-42ae-bfc7-a559d09efb9f - null null
2026-01-28 02:34:06.502 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:34:06.517 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSale(System.Guid, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:34:06.615 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:34:07.892 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (62ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:34:07.986 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1367.7343ms.
2026-01-28 02:34:07.992 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Common.ApiResponseWithData`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:34:08.040 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) in 1519.5108ms
2026-01-28 02:34:08.041 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:34:08.053 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:7181/api/Sales/76bba4a3-1e60-42ae-bfc7-a559d09efb9f - 200 null application/json; charset=utf-8 1594.7233ms
2026-01-28 02:34:21.511 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:34:24.538 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:34:24.606 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:34:24.829 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:34:24.829 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:34:24.829 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:34:24.829 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:34:24.829 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:34:25.108 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:34:25.170 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 62.9986ms
2026-01-28 02:34:25.189 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:34:25.192 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 2.8899ms
2026-01-28 02:34:25.223 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:34:25.321 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.1743ms
2026-01-28 02:34:29.315 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:7181/api/Sales/76bba4a3-1e60-42ae-bfc7-a559d09efb9f - null null
2026-01-28 02:34:29.380 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:34:29.395 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSale(System.Guid, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:34:29.489 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:34:30.727 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (59ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:34:30.823 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1332.0632ms.
2026-01-28 02:34:30.829 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Common.ApiResponseWithData`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:34:30.876 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) in 1478.7687ms
2026-01-28 02:34:30.877 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:34:30.888 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:7181/api/Sales/76bba4a3-1e60-42ae-bfc7-a559d09efb9f - 200 null application/json; charset=utf-8 1573.2226ms
2026-01-28 02:34:56.243 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - null null
2026-01-28 02:34:56.246 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:34:56.247 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSale(System.Guid, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:34:56.251 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:34:56.304 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:34:56.306 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 55.2735ms.
2026-01-28 02:34:56.307 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Common.ApiResponseWithData`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:34:56.308 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) in 60.2825ms
2026-01-28 02:34:56.308 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:34:56.308 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - 200 null application/json; charset=utf-8 65.9827ms
2026-01-28 02:36:37.697 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:36:41.516 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:36:41.587 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:36:41.840 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:36:41.840 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:36:41.841 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:36:41.841 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:36:41.841 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:36:42.413 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:36:42.477 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 64.7378ms
2026-01-28 02:36:42.495 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:36:42.497 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 1.4756ms
2026-01-28 02:36:42.527 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:36:42.639 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 111.6615ms
2026-01-28 02:36:46.580 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - null null
2026-01-28 02:36:46.612 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:36:46.627 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSale(System.Guid, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:36:46.726 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:36:48.082 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (59ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:36:48.176 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1446.4721ms.
2026-01-28 02:36:48.183 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Common.ApiResponseWithData`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:36:48.236 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) in 1605.0604ms
2026-01-28 02:36:48.237 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:36:48.247 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - 200 null application/json; charset=utf-8 1666.6767ms
2026-01-28 02:37:20.619 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2026-01-28 02:37:23.794 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2026-01-28 02:37:23.863 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '/Users/thiagoteixeira/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-28 02:37:24.086 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2026-01-28 02:37:24.086 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2026-01-28 02:37:24.087 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2026-01-28 02:37:24.087 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2026-01-28 02:37:24.087 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: /Users/thiagoteixeira/Documents/ciandt/abi-gth-omnia-developer-evaluation/src/Ambev.DeveloperEvaluation.WebApi
2026-01-28 02:37:24.351 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2026-01-28 02:37:24.444 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 93.4278ms
2026-01-28 02:37:24.463 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2026-01-28 02:37:24.465 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 1.537ms
2026-01-28 02:37:24.499 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2026-01-28 02:37:24.597 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.4016ms
2026-01-28 02:37:27.429 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - null null
2026-01-28 02:37:27.459 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:37:27.477 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSale(System.Guid, System.Threading.CancellationToken) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2026-01-28 02:37:27.580 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executing action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) - Validation state: "Valid"
2026-01-28 02:37:28.902 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (59ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."CancelledAt", t."CreatedAt", t."CustomerId", t."IsCancelled", t."SaleNumber", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."DiscountAmount", s0."DiscountPercentage", s0."ProductId", s0."Quantity", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."CancelledAt", s."CreatedAt", s."CustomerId", s."IsCancelled", s."SaleNumber", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    WHERE s."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "SaleProduct" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."Id"
2026-01-28 02:37:28.999 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action method Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1416.5613ms.
2026-01-28 02:37:29.005 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Common.ApiResponseWithData`1[[Ambev.DeveloperEvaluation.WebApi.Common.SaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 02:37:29.055 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi) in 1575.2865ms
2026-01-28 02:37:29.056 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.GetSale (Ambev.DeveloperEvaluation.WebApi)'
2026-01-28 02:37:29.067 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:7181/api/Sales/ae86743e-9451-45b2-8c0f-133a9f5c2c9c - 200 null application/json; charset=utf-8 1638.5913ms
2026-01-28 02:37:41.272 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
